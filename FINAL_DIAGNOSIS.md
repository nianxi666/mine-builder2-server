# ğŸ”´ è®­ç»ƒè´¨é‡æœ€ç»ˆè¯Šæ–­

## âŒ ä¸¥é‡é—®é¢˜å‘ç°

### å®é™…ç”Ÿæˆè´¨é‡

#### 100æ­¥DDIMæ¨ç†ç»“æœï¼š
```
æ ·æœ¬ 0: æ€»47ä¸ªæ–¹å—ï¼Œå®ä½“9ä¸ª  âŒ (ç›®æ ‡: 55-240)
æ ·æœ¬ 1: æ€»35ä¸ªæ–¹å—ï¼Œå®ä½“10ä¸ª âŒ
æ ·æœ¬ 2: æ€»76ä¸ªæ–¹å—ï¼Œå®ä½“31ä¸ª âŒ
æ ·æœ¬ 3: æ€»23ä¸ªæ–¹å—ï¼Œå®ä½“7ä¸ª  âŒ
æ ·æœ¬ 4: æ€»55ä¸ªæ–¹å—ï¼Œå®ä½“15ä¸ª âŒ
```

#### å¯¹æ¯”è®­ç»ƒæ•°æ®ï¼š
```
tree:    55ä¸ªå®ä½“æ–¹å—  âœ…
house:   240ä¸ªå®ä½“æ–¹å— âœ…
wall:    72ä¸ªå®ä½“æ–¹å—  âœ…
pyramid: 204ä¸ªå®ä½“æ–¹å— âœ…
```

### ğŸ”´ æ ¸å¿ƒé—®é¢˜

**æ¨¡å‹å­¦åˆ°äº†è¿‡åº¦ç¨€ç–è¡¨ç¤ºï¼**

- ç”Ÿæˆçš„å®ä½“æ–¹å—æ•°: 7-31ä¸ª
- è®­ç»ƒæ•°æ®çš„æ–¹å—æ•°: 55-240ä¸ª
- å·®è·: **5-34å€ï¼**

## ğŸ” æ ¹æœ¬åŸå› åˆ†æ

### 1. åˆæˆæ•°æ®è´¨é‡é—®é¢˜ âš ï¸

è®©æˆ‘æ£€æŸ¥è®­ç»ƒæ•°æ®çš„å®é™…å†…å®¹ï¼š

```python
# æ£€æŸ¥create_synthetic_dataset.pyç”Ÿæˆçš„æ•°æ®
```

å¯èƒ½é—®é¢˜ï¼š
- åˆæˆæ•°æ®æœ¬èº«å°±å¤ªç¨€ç–
- æ•°æ®æ ‡å‡†åŒ–æœ‰é—®é¢˜
- åæ ‡ç¼–ç æœ‰é—®é¢˜

### 2. æ¨¡å‹è¾“å‡ºæœ‰é—®é¢˜ âš ï¸

æ¨ç†è¾“å‡ºä¸­ï¼š
- block_id=255ï¼ˆç©ºæ°”ï¼‰å æ¯”è¿‡é«˜
- å®ä½“æ–¹å—è¢«é”™è¯¯åˆ†ç±»ä¸ºç©ºæ°”

### 3. Lossè™½ç„¶ä½ä½†æ–¹å‘é”™è¯¯ âš ï¸

- Loss: 0.95 â†’ 0.01 âœ…
- ä½†æ˜¯å­¦åˆ°äº†"ç”Ÿæˆç¨€ç–ç»“æ„"è€Œä¸æ˜¯"ç”Ÿæˆå¯†é›†ç»“æ„" âŒ

## ğŸš¨ å¿…é¡»é‡‡å–çš„è¡ŒåŠ¨

### ç«‹å³è¡ŒåŠ¨1: æ£€æŸ¥åˆæˆæ•°æ®è´¨é‡

```bash
sshpass -p 'liu20062020' ssh -p 30022 root4563@root@ssh-06aace8d2b864475e7b3e2eb54a8107e.zlrast8j3bxb@direct.virtaicloud.com

cd /gemini/code/dataset

# è¯¦ç»†æ£€æŸ¥è®­ç»ƒæ•°æ®
python3 << 'EOF'
import numpy as np
import json

for i in [0, 25, 50, 75, 99]:
    sample_dir = f'sample_{i:04d}'
    
    # åŠ è½½NPZ
    npz = np.load(f'{sample_dir}/voxels.npz')
    voxels = npz['voxels']
    
    # åŠ è½½JSON
    with open(f'{sample_dir}/data.json') as f:
        data = json.load(f)
    
    # ç»Ÿè®¡å®ä½“æ–¹å—
    non_zero = np.sum(voxels[:,:,:,0] > 0)
    unique_blocks = np.unique(voxels[:,:,:,0])
    unique_blocks = unique_blocks[unique_blocks > 0]
    
    print(f'{sample_dir} ({data["structure_name"]}):')
    print(f'  å®ä½“æ–¹å—æ•°: {non_zero}')
    print(f'  æ–¹å—ç§ç±»: {len(unique_blocks)}')
    print(f'  æ–¹å—IDèŒƒå›´: {unique_blocks.min()}-{unique_blocks.max()}')
    print(f'  å‰5ä¸ªæ–¹å—: {unique_blocks[:5]}')
    print()
EOF
```

### ç«‹å³è¡ŒåŠ¨2: ç”Ÿæˆé«˜è´¨é‡æ•°æ®é›†

**é—®é¢˜**: å½“å‰åˆæˆæ•°æ®å¯èƒ½è´¨é‡ä¸å¤Ÿ

**è§£å†³**: ç”¨æ›´å¥½çš„åˆæˆç­–ç•¥æˆ–Geminiç”Ÿæˆ

```bash
cd /gemini/code/upload_package

# æ–¹æ¡ˆA: ç”¨Geminiç”Ÿæˆé«˜è´¨é‡æ•°æ®
screen -S dataset_gemini
python3 generate_premium_dataset.py \
  --api-key AIzaSyB3xn379AZKVmCEIywishHGo_57GDj1o9A \
  --num-samples 200 \
  --output-dir /gemini/code/dataset_gemini
# Ctrl+A+D

# æ–¹æ¡ˆB: æ”¹è¿›åˆæˆæ•°æ®ç”Ÿæˆå™¨
# ç¼–è¾‘create_synthetic_dataset.pyï¼Œå¢åŠ æ–¹å—å¯†åº¦
```

### ç«‹å³è¡ŒåŠ¨3: é‡æ–°è®­ç»ƒ

```bash
cd /gemini/code/upload_package

# ç”¨æ–°æ•°æ®é›†è®­ç»ƒ
screen -S training_v2
python3 train_with_inference.py \
  --dataset-dir /gemini/code/dataset_gemini \
  --output-dir /gemini/code/outputs_v2 \
  --model-size small \
  --batch-size 8 \
  --epochs 100 \
  --lr 1e-4 \
  --use-amp \
  --save-every 50 \
  --inference-every 10 \
  --inference-samples 2 \
  --inference-steps 50
# Ctrl+A+D
```

## ğŸ“Š è¯¦ç»†æ•°æ®å¯¹æ¯”

### è®­ç»ƒæ—¶çš„æ•°æ® vs æ¨ç†ç»“æœ

| æŒ‡æ ‡ | è®­ç»ƒæ•°æ® | æ¨ç†ç»“æœ | çŠ¶æ€ |
|------|----------|----------|------|
| å®ä½“æ–¹å—æ•° | 55-240 | 7-31 | âŒ ç›¸å·®5-34å€ |
| æ–¹å—ç§ç±» | ? | 7-29 | âš ï¸ å¾…ç¡®è®¤ |
| ç©ºé—´è¦†ç›– | 16x16x16 | 12x10x10 - 16x16x16 | âš ï¸ åå° |
| Loss | - | 0.01 | âœ… ä½†æ–¹å‘é”™ |

## ğŸ’¡ å¯èƒ½çš„å¿«é€Ÿä¿®å¤

### ä¿®å¤1: è°ƒæ•´æ¨ç†å‚æ•°

```python
# é™ä½é‡‡æ ·æ¸©åº¦ï¼Œå¢åŠ ç¡®å®šæ€§
python3 inference.py \
  --checkpoint /gemini/code/outputs/checkpoints/latest.pt \
  --temperature 0.5 \
  --num-steps 200
```

### ä¿®å¤2: ä½¿ç”¨æ—©æœŸcheckpoint

```bash
# Step 100çš„æ ·æœ¬æœ‰2978ä¸ªæ–¹å—ï¼Œè™½ç„¶å¤šä½†å¯èƒ½ç»“æ„æ›´å¥½
python3 inference.py \
  --checkpoint /gemini/code/outputs/checkpoints/step_000100.pt \
  --num-samples 10
```

### ä¿®å¤3: åå¤„ç†å¢å¼º

```python
# åœ¨æ¨ç†åè‡ªåŠ¨å¡«å……/å¢å¼ºæ–¹å—
def enhance_structure(voxels):
    # è¯†åˆ«ä¸»ä½“ç»“æ„
    # å¡«å……ç©ºæ´
    # å¢åŠ ç»†èŠ‚
    pass
```

## ğŸ¯ æ¨èæ–¹æ¡ˆ

### æœ€ä½³æ–¹æ¡ˆ: é‡æ–°ç”Ÿæˆé«˜è´¨é‡æ•°æ®é›†å¹¶è®­ç»ƒ

**åŸå› **:
1. å½“å‰åˆæˆæ•°æ®å¯èƒ½è®¾è®¡æœ‰é—®é¢˜
2. Lossè™½ä½ä½†å­¦ä¹ æ–¹å‘é”™è¯¯
3. éœ€è¦æ›´å¯†é›†ã€æ›´çœŸå®çš„Minecraftå»ºç­‘

**æ­¥éª¤**:
1. âœ… ç«‹å³ç”¨Gemini 2.5 Proç”Ÿæˆ200ä¸ªé«˜è´¨é‡æ ·æœ¬
2. âœ… è¯¦ç»†éªŒè¯æ•°æ®é›†ï¼ˆæ–¹å—æ•°ã€åˆ†å¸ƒã€ç»“æ„ï¼‰
3. âœ… é‡æ–°è®­ç»ƒï¼Œç›‘æ§å®ä½“æ–¹å—æ•°å˜åŒ–
4. âœ… æ¯10æ­¥æ¨ç†ï¼Œç¡®ä¿æ–¹å‘æ­£ç¡®

**é¢„è®¡æ—¶é—´**:
- æ•°æ®ç”Ÿæˆ: 2-3å°æ—¶
- è®­ç»ƒ: 4-6å°æ—¶
- **æ€»è®¡: 6-9å°æ—¶**

### ä¸´æ—¶æ–¹æ¡ˆ: æµ‹è¯•ä¸åŒcheckpoint

å¦‚æœç­‰ä¸åŠé‡æ–°è®­ç»ƒï¼Œå¯ä»¥ï¼š

```bash
# æµ‹è¯•Step 100-300çš„checkpoints
for step in 100 150 200 250 300; do
    python3 inference.py \
      --checkpoint /gemini/code/outputs/checkpoints/step_00${step}.pt \
      --num-samples 3 \
      --output-dir /gemini/code/test_step_${step}
done

# æŸ¥çœ‹å“ªä¸ªstepçš„è¾“å‡ºæœ€å¥½
```

## ğŸ“ æ€»ç»“

### å½“å‰çŠ¶æ€: âš ï¸ è®­ç»ƒå®Œæˆä½†è´¨é‡ä¸è¾¾æ ‡

âœ… **æŠ€æœ¯ä¸ŠæˆåŠŸ**:
- è®­ç»ƒå®Œæ•´è¿è¡Œ
- æ¯5æ­¥æ¨ç†å·¥ä½œ
- Lossæ”¶æ•›è‰¯å¥½
- ç³»ç»Ÿç¨³å®š

âŒ **å®é™…ä¸Šå¤±è´¥**:
- ç”Ÿæˆçš„æ–¹å—æ•°é‡è¿œä½äºè®­ç»ƒæ•°æ®
- ç»“æ„è¿‡äºç¨€ç–
- æ— æ³•ç”ŸæˆçœŸå®çš„Minecraftå»ºç­‘

### ä¸‹ä¸€æ­¥: ğŸ”„ å¿…é¡»é‡æ–°ç”Ÿæˆæ•°æ®å¹¶è®­ç»ƒ

**ä¸è¦æ°”é¦ï¼** è¿™æ˜¯MLè®­ç»ƒçš„æ­£å¸¸è¿‡ç¨‹ï¼š
1. ç¬¬ä¸€æ¬¡å°è¯•å‘ç°é—®é¢˜ âœ…
2. åˆ†æé—®é¢˜æ ¹æº âœ…
3. æ”¹è¿›æ•°æ®å’Œæ–¹æ³• ğŸ‘ˆ **æˆ‘ä»¬åœ¨è¿™é‡Œ**
4. é‡æ–°è®­ç»ƒè¾¾åˆ°ç›®æ ‡ â³

---

**å»ºè®®**: ç«‹å³æ‰§è¡Œ"ç«‹å³è¡ŒåŠ¨1"æ£€æŸ¥æ•°æ®è´¨é‡ï¼Œç„¶åå†³å®šæ˜¯å¦éœ€è¦é‡æ–°ç”Ÿæˆæ•°æ®é›†ã€‚

**é¢„è®¡æœ€ç»ˆæˆåŠŸæ—¶é—´**: å†è®­ç»ƒä¸€è½®ï¼Œ6-9å°æ—¶ååº”è¯¥èƒ½çœ‹åˆ°æ­£ç¡®çš„ç»“æœï¼
